<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preprocessing Audio • Rthoptera</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Preprocessing Audio">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rthoptera</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Intro_to_Rthoptera.html">Introduction to Rthoptera</a>
    </li>
    <li>
      <a href="../articles/Preprocessing.html">Preprocessing Audio</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Preprocessing Audio</h1>
                        <h4 data-toc-skip class="author">Francisco
Rivas</h4>
            
            <h4 data-toc-skip class="date">2024-10-02</h4>
      

      <div class="hidden name"><code>Preprocessing.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="section-when-and-why-to-preprocess-your-recordings">When and why to preprocess your recordings<a class="anchor" aria-label="anchor" href="#section-when-and-why-to-preprocess-your-recordings"></a>
</h2>
<p>There are many reasons why bioacousticians edit their recordings
before analyzing them. This is especially true when working with field
recordings, where non-target sounds may obscure the analyses, often
occupying frequencies below the signal of interest. In other cases, the
field recordist used an ultrasonic microphone and a high sampling rate
(e.g., 128 kHz, 384 kHz) and the recorded insect happened to sing well
below the Nyquist frequency (half the sampling rate). Sometimes the
insect doesn’t call very often, forcing us to monitor for long periods
of silence without stopping the recording. In all these cases, we will
need to preprocess our recordings. <strong><em>Rthoptera</em></strong>
offers functions to deal with most of these issues, minimizing the need
for multiple software in your workflow.</p>
<p>DISCLAIMER: R is not optimized for rendering large amounts of data in
plots. If you have long sound files (&gt; 1 min) recorded at high
sampling rates (&gt; 48 kHz), you might want to subset them with a
dedicated audio software before importing them into R. A popular free
audio editor is Audacity.</p>
<p>Run this code in R to open the <code>import_wave_app</code>, which
will allow you to select, name and import sound files as R objects of
class “Wave”.</p>
<div class="sourceCode" id="section-cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">Rthoptera</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/import_wave_app.html">import_wave_app</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In this guide, we will work with the example Wave objects included in
the package. To load all of them, run this:</p>
<div class="sourceCode" id="section-cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/load_wave_data.html">load_wave_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If occasionally you want to work with a single file from the
examples, you can run:</p>
<div class="sourceCode" id="section-cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"tettigonia"</span><span class="op">)</span></span></code></pre></div>
<p>which will make the song of <em>Tettigonia cantans</em> available in
the R environment.</p>
<p>Now you can use the different functions to preprocess the Wave before
analysis. All the preprocessing apps in
<strong><em>Rthoptera</em></strong> produce blueprint-like plots to
remind users these are not intended for publication, but instead to aid
in decision-making on the edits.</p>
<p>As a rule of thumb, if you want to analyze several snippets of a
recording separately, you should first evaluate if you need to do any
filtering or downsampling before extracting the cuts to avoid repeating
the process for each. If you want to analyze only a selection of the
wave file, you might want to trim it before filtering, which will
optimize processing time for the other editing steps.</p>
<div class="section level3">
<h3 id="section-trim">Trim<a class="anchor" aria-label="anchor" href="#section-trim"></a>
</h3>
<p>To trim a Wave, run the <code><a href="../reference/trim_app.html">trim_app()</a></code>, plot the
oscillogram, select the portion you want to save, type a name for it,
and save it. You can overwrite the original Wave by assigning the same
name for the selection (this will not have any effect outside the R
environment), or assign a new name to create a new Wave object.If you
want to save several snippets of the same length, just drag the first
selection to the desired position and assign a new name before
saving.</p>
</div>
<div class="section level3">
<h3 id="section-downsample">Downsample<a class="anchor" aria-label="anchor" href="#section-downsample"></a>
</h3>
<p>If you think the sampling rate used to record an insect was
unnecessarily high, use the <code><a href="../reference/downsample_app.html">downsample_app()</a></code> to verify this
and downsample if appropriate. By design, the minimum Nyquist allowed
for this in <code>Rthoptera</code> is 48 kHz. The other two options are
96 kHz, and 192 kHz. For most crickets, 48 kHz Nyquist will suffice, but
caution must be applied. Once the app has launched, select the Wave you
want to analyze and click “Plot”. Now you can assess what is the maximum
frequency of interest (MaxFOI) by hovering over the Mean Power Spectrum.
If the MaxFOI is less than half of the Nyquist (maximum visible
frequency in the plot), you can consider downsampling. Select the
closest available value above the MaxFOI and click “Downsample”. For
this example, we will use the “gryllus” Wave included with
<strong><em>Rthoptera</em></strong>, a recording of <em>Gryllus
campestris</em> made by Cesare Brizio in Italy.</p>
<div class="sourceCode" id="section-cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"gryllus"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/downsample_app.html">downsample_app</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Francisco Rivas, Cesare Brizio.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
